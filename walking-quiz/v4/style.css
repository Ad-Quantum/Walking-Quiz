/* =========================
   1. DESIGN TOKENS (ATOMS)
   ========================= */
:root {
  --c-primary: #2962ff; --c-primary-hover: #1e40ff; --c-accent: #ffd600;
  --c-text-main: #111111; --c-text-sub: #7e7e7e; --c-text-light: #6f6f6f;
  --c-bg-white: #ffffff; --c-bg-surface: #f5f8ff;
  --bg-gradient-main: linear-gradient(180deg, #f3e9ff 0%, #f7f1ff 20%, #ffffff 70%, #ffffff 100%);
  --font-main: 'Inter', system-ui, -apple-system, sans-serif;
  --radius-btn: 999px; --radius-card: 20px;
  --w-wide: 900px; --w-narrow: 528px;
  --header-py: 70px; --footer-pb: 100px;
  --header-height: 90px;
  --footer-height: 160px;
}
* { margin: 0; padding: 0; box-sizing: border-box; }
body { 
  font-family: var(--font-main); 
  background-color: #ffffff; 
  color: var(--c-text-main); 
  overflow: hidden; 
  height: 100vh;  /* For older phones */
  height: 100dvh; /* Dynamic Viewport Height: subtracts browser panels! */
}
.hidden { display: none !important; }

/* 2. TYPOGRAPHY */
.h1 { font-size: 48px; font-weight: 800; color: var(--c-primary); line-height: 1.1; margin-bottom: 8px; }
.h2 { font-size: 36px; font-weight: 700; line-height: 1.25; margin-bottom: 12px;}
.h2-wide {font-size: 36px; font-weight: 700; line-height: 1.25; margin: 0 auto 24px; max-width: 500px;}
.h3 { 
  font-size: 32px;
  font-weight: 700; 
  line-height: 1.25; 
  margin-bottom: 12px; 
}
.h4 { font-size: 14px; font-weight: 500; line-height: 1.25;}
.text-subtitle { 
  font-size: 16px; 
  color: var(--c-text-sub); 
  font-weight: 400; 
  margin: 0 auto 24px; 
  max-width: 450px;
  white-space: normal; 
  overflow-wrap: break-word; 
}
.text-caption { font-size: 14px; color: var(--c-text-light); }
.text-legal { font-size: 12px; color: #6f6f6f; line-height: 1.5; width: 100%; margin: 0 auto; text-align: center; white-space: normal; overflow-wrap: break-word; }
.text-highlight { color: var(--c-primary); font-weight: 700; }
.text-center { text-align: center; }
.link { color: var(--c-primary); text-decoration: underline; cursor: pointer; }
.mt-auto { margin-top: auto; }

/* 3. GLOBAL LAYOUT */
.view { position: absolute; inset: 0; width: 100%; height: 100%; opacity: 0; visibility: hidden; pointer-events: none; background: var(--c-bg-white); display: flex; flex-direction: column; z-index: 1; }
.view.active { opacity: 1; visibility: visible; pointer-events: auto; z-index: 10; }
.view--gradient { background: var(--bg-gradient-main); }
.view--no-bg { background: transparent !important; }

.layout-header { flex: 0 0 auto; width: 100%; padding-top: var(--header-py); padding-bottom: 36px; z-index: 50; }


.header-logo {
  position: absolute; /* Remove from flow so it doesn't push other elements */
  top: 20px;           /* Position vertically in the center of the header */
  left: 30px;         /* Fixed left margin */
  transform: translateY(-50%); /* Adjustment for precise vertical centering */
  height: 25px;       /* Height adjusted to arrow size */
  width: auto;        /* Auto width to keep proportions */
  object-fit: contain;
  z-index: 600;       /* On top of everything */
  margin-top: 12px;      
}

/* NAV-HEADER */
.nav-header {
  position: fixed; 
  top: 0; 
  left: 0; 
  right: 0; 
  background: #ffffff;
  /*box-shadow: 0 10px 10px #ffffff;*/

  display: flex; align-items: center; justify-content: center;
  max-width: 100%; margin: 0 auto; gap: 20px; 
  padding: 40px calc(20px + var(--scrollbar-width, 0px)) 10px 20px;
  z-index: 500;

}
.nav-header__content { 
  display: flex; 
  align-items: center; 
  justify-content: center; 
  gap: 20px; width: 100%; 
  max-width: var(--w-wide); padding: 0 20px; }

  /* ARROW LOCK */
.btn-arrow.disabled,
.btn.disabled {
  opacity: 0.3 !important;
  pointer-events: none !important; /* Physically prevents click */
  cursor: default !important;
}

.layout-main { 
  position: relative; 
  z-index: 2; 
  flex: 1; 
  overflow-y: auto; 
  width: 100%; 
  padding: 0 20px 0px; 
  display: flex; 
  flex-direction: column; 
  align-items: center; 
  /* Add dynamic bottom margin equal to footer height + a small buffer */
  padding-bottom: calc(var(--footer-h, 120px) + 20px + env(safe-area-inset-bottom)) !important;
}
.layout-main--centered { justify-content: center; padding-bottom: 40px; }
.layout-main--with-header {
  /* Header height + your 20px gap */
  padding-top: calc(var(--header-height) + 20px) !important;
  /* Footer height + buffer, so content doesn't stick */
  padding-bottom: calc(var(--footer-height) + 20px) !important;
}
.view:not(:has(.layout-footer)) .layout-main {
  padding-bottom: 40px !important;
}

.bg-image { position: absolute; inset: 0; background-size: cover; background-position: center; z-index: 0; background-color: #555555;}

.layout-footer { 
  position: fixed; 
  bottom: 0; 
  left: 0; 
  right: 0; 
  z-index: 100; 
  display: flex; 
  background: #ffffff; 
  flex-direction: column; 
  align-items: center; 
  justify-content: center; 
  padding: 20px 20px var(--footer-pb); 
  /* Add shadow */
  box-shadow: 0 -10px 20px #ffffff;
  border-top: 1px solid var(--c-bg-surface);
  

  /* Additionally: add a thin line on top for border clarity */
  /* border-top: 1px solid var(--c-bg-surface); */
}
.layout-footer--transparent { background: transparent; pointer-events: none; }
.layout-footer--transparent > * { pointer-events: auto; }
.inline-footer { margin-top: 40px; width: 100%; display: flex; justify-content: center; }

/* 4. GRIDS */
.container-wide { width: 100%; max-width: var(--w-wide); margin: 0 auto; }
.container-narrow { width: 100%; max-width: var(--w-narrow); margin: 0 auto; }
.grid-system { display: grid; width: 100%; gap: 8px; } 
.grid-age { grid-template-columns: repeat(2, auto); justify-content: center; gap: 24px; margin-top: 60px; }
.grid-2 { grid-template-columns: 1fr; gap: 12px; margin-top: 20px; }
.grid-1 { grid-template-columns: 1fr; gap: 8px; margin-top: 24px; }

/* 5. COMPONENTS */
.btn { 
  border: none; 
  cursor: pointer; 
  display: inline-flex; 
  align-items: center; 
  justify-content: center; 
  padding: 14px 40px; 
  padding-left: 60px;
  padding-right: 60px;
  border-radius: var(--radius-btn); 
  font-size: 18px; 
  font-weight: 600; 
  transition: transform 0.1s; }
.btn:active { transform: scale(0.98); }
.btn--primary { 
  background: linear-gradient(90deg, #1e40ff, #437bff); 
  color: var(--c-accent); 
  /* box-shadow: 0 10px 24px rgba(0,0,0,0.25); */
  box-shadow: 0 6px 16px rgba(41, 98, 255, 0.25);
  width: auto; 
  min-width: 160px; 
}
.btn-arrow { background: transparent; border: none; cursor: pointer; color: var(--c-primary); display: flex; padding: 8px; }
.btn-arrow svg { width: 28px; height: 28px; }


.loader-wrap { width: 300px; max-width: 100%; height: 26px; background: rgba(0,0,0,0.6); border-radius: 999px; padding: 4px; margin: 24px auto 0; position: relative; z-index: 10; }
.loader-fill { width: 0%; height: 100%; background: linear-gradient(90deg, #0d6efd, #5b3bff); border-radius: 999px; transition: width 0.1s linear; }

/* Step Progress */
.step-progress { position: relative; width: 100%; max-width: 400px; margin: 0; }
.step-progress__track { 
  position: absolute; 
  top: 50%; 
  left: 0; 
  right: 0; 
  height: 3px; 
  background: #ebf0f5; 
  border-radius: 999px; 
  transform: translateY(-50%); 
  z-index: 1; 
  padding-left: 8px;
  padding-right: 8px;

}
.step-progress__fill { height: 100%; background: var(--c-primary); width: 0%; transition: width 0.3s ease; }
.step-progress__dots { position: relative; display: flex; justify-content: space-between; z-index: 2; }
.step-dot { width: 12px; height: 12px; border-radius: 50%; background: #ebf0f5; border: none; transition: 0.3s; }
.step-dot.active { background: var(--c-primary); transform: scale(1.1); }

/* Cards */
.card-person { display: flex; flex-direction: column; align-items: center; cursor: pointer; background: none; border: none; width: 150px; }
.card-person__img-wrap { width: 150px; height: 150px; border-radius: 50%; border: 3px solid #fff; overflow: hidden; background: #fff; box-shadow: 0 4px 12px rgba(0,0,0,0.1); position: relative; z-index: 1; }
.card-person__img { width: 100%; height: 100%; object-fit: cover; object-position: top; }
.btn--age { padding: 8px 24px; font-size: 16px; width: 100%; min-width: auto; margin-top: -20px; position: relative; z-index: 2; }

.card-checkbox { background: var(--c-bg-surface); border-radius: var(--radius-card); border: 2px solid transparent; width: 100%; min-height: 100px; cursor: pointer; transition: 0.2s all; overflow: hidden; display: flex; align-items: center; padding: 0 0 0 20px; gap: 16px; }
.card-checkbox__check { width: 24px; height: 24px; border-radius: 50%; border: 2px solid #ccc; background: #fff; display: flex; align-items: center; justify-content: center; color: transparent; font-size: 14px; flex-shrink: 0; }
.card-checkbox__title { font-weight: 700; font-size: 16px; color: var(--c-text-main); flex: 1; text-align: left; }
.card-checkbox__img { height: 100px; width: auto; object-fit: cover; display: block; margin: 0; }
.card-checkbox.selected { background: #3f51ff; border-color: #3f51ff; } .card-checkbox.selected .card-checkbox__title { color: #fff; } .card-checkbox.selected .card-checkbox__check { border-color: #fff; color: var(--c-primary); }

.card { background: var(--c-bg-surface); border-radius: var(--radius-card); border: 2px solid transparent; width: 100%; min-height: 100px; cursor: pointer; transition: 0.2s all; overflow: hidden; display: flex; align-items: center; justify-content: space-between; padding: 0 0 0 24px; }
.card--small { background: var(--c-bg-surface); border-radius: var(--radius-card); border: 2px solid transparent; width: 100%; min-height: 80px; cursor: pointer; transition: 0.2s all; overflow: hidden; display: flex; align-items: center; justify-content: space-between; padding: 0 0 0 24px; }
.card__title { font-weight: 700; font-size: 16px; color: var(--c-text-main); flex: 1; padding-right: 16px; text-align: left; }
.card__img { height: 100px; width: auto; object-fit: cover; display: block; margin: 0; }
.card__img--small { height: 48px !important; width: auto; object-fit: contain !important; margin-right: 24px; display: block; }

.card.selected { background: #3f51ff; border-color: #3f51ff; } .card.selected .card__title { color: #fff; }
.card--small.selected { background: #3f51ff; border-color: #3f51ff; } .card--small.selected .card__title { color: #fff; }

/* NEW STYLES FOR SCREEN 10 (SUBTITLES AND IMAGE SWAP) */
.card__text-wrap { flex: 1; display: flex; flex-direction: column; align-items: flex-start; padding-right: 16px; text-align: left; }
.card__text-wrap .card__title { padding-right: 0; }
.card__subtitle { font-size: 14px; color: var(--c-text-sub); font-weight: 400; margin-top: 4px; line-height: 1.4; }

.card .card__img--active { display: none; }
.card.selected .card__img--normal { display: none; }
.card.selected .card__img--active { display: block; }
.card--small .card__img--active { display: none; } /* Fallback for small cards */

.card-zone { background: var(--c-bg-surface); border-radius: 16px; border: 2px solid transparent; cursor: pointer; transition: 0.2s all; padding: 10px 8px; min-height: 50px; width: 100%; display: flex; align-items: center; }
.card-zone__check { width: 20px; height: 20px; border-radius: 50%; border: 2px solid #ccc; background: #fff; display: flex; align-items: center; justify-content: center; color: transparent; font-size: 12px; flex-shrink: 0; }
.card-zone__title { font-size: 16px; font-weight: 700; color: var(--c-text-main); flex: 1; text-align: center; padding-right: 20px; line-height: 1.2; }
.card-zone.selected { background: #3f51ff; border-color: #3f51ff; } .card-zone.selected .card-zone__title { color: #fff; } .card-zone.selected .card-zone__check { border-color: #fff; color: var(--c-primary); }

.content-image-wrap { display: flex; justify-content: center; margin: 10px 0; }
.content-img { max-width: 100%; height: auto; border-radius: 20px; object-fit: contain; }
.image-container-card { background: var(--c-bg-surface); border-radius: var(--radius-card); width: 100%; padding: 24px; margin: 36px 0; display: flex; justify-content: center; align-items: center; }

/* 6. LAYOUT SPECIFICS (SPLIT) */
.split-layout { display: flex; flex-direction: column; height: 100%; width: 100%; overflow: hidden; }
.split-layout__top { flex: 0 0 auto; width: 100%; text-align: center; padding-top: 36px; padding-left: 20px; padding-right: 20px; z-index: 10; }
.split-layout__center { flex: 1; display: flex; align-items: center; justify-content: center; overflow-y: auto; min-height: 0; padding: 20px; width: 100%; }
.split-layout__content-wrapper { width: 100%; max-width: 900px; display: flex; flex-direction: column; align-items: center; justify-content: center; }
.split-img-container { width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; }
.split-img { max-width: 100%; max-height: 100%; width: auto; height: auto; object-fit: contain; }
.split-layout__bottom { flex: 0 0 auto; width: 100%; display: flex; flex-direction: column; align-items: center; justify-content: flex-end; padding-bottom: 36px; padding-left: 20px; padding-right: 20px; padding-top: 10px; background: #fff; z-index: 10; }

#view-2 .split-layout__center { padding-bottom: 120px; }

.sticky-footer { position: fixed; bottom: 0; left: 0; right: 0; background: #ffffff; border: none; backdrop-filter: none; padding: 20px 20px 40px; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 12px; z-index: 100; border-top: 2px solid #f5f8ff; }

/* Screen 8 */
.zones-layout { display: grid; grid-template-columns: 0.8fr 1fr; gap: 12px; width: 100%; margin-top: 20px; align-items: stretch; }
.zones-layout__image { position: relative; width: 100%; height: 300px; min-height: 100%;}
.zones-stack { position: relative; width: 100%; height: 100%; width: auto;}
.zones-base, .zones-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: contain; object-position: center top; }
.zones-layer { opacity: 0; transition: opacity 0.2s; z-index: 2; }
.zones-layer.visible { opacity: 1; }
.zones-base { z-index: 1; opacity: 1; }
.zones-layout__list { display: flex; flex-direction: column; gap: 8px; width: 100%; }

.card.selected .card__subtitle {
  color: #ffffff !important; /* Use !important to definitely override the gray color */
}

/* =========================
   TOGGLE SWITCH (For Screen 22)
   ========================= */

/* Container for the switch row */
.switch-row {
  display: flex;
  align-items: center;
  justify-content: space-between; /* Spread to edges */
  width: 100%;
  padding: 20px 0; /* Top and bottom padding */
  padding-left: 10px;
  padding-right: 10px;
  margin-top: 10px;
}

.switch-label {
  font-size: 16px;
  font-weight: 600;
  color: var(--c-text-main);
}

/* The switch itself (iOS style) */
.toggle-switch {
  position: relative;
  width: 50px;
  height: 30px;
  background-color: #e0e0e0;
  border-radius: 999px;
  cursor: pointer;
  transition: background-color 0.3s;
}

/* Inner circle */
.toggle-switch::after {
  content: '';
  position: absolute;
  top: 2px;
  left: 2px;
  width: 26px;
  height: 26px;
  background-color: white;
  border-radius: 50%;
  transition: transform 0.3s;
  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

/* Active state */
.toggle-switch.active {
  background-color: var(--c-primary);
}

.toggle-switch.active::after {
  transform: translateX(20px);
}



/* =========================
   DATE PICKER (SWIPER)
   ========================= */
.date-selector-wrapper {
  position: relative;
  width: 100%;
  max-width: 340px;
  height: 250px; /* Height of the whole drum */
  margin: 0 auto 0 auto;
  /* margin: auto;
  /*margin-top: 0px;
  margin-bottom: 0px;*/
  display: flex;
  justify-content: center;
  align-items: center;
}

.date-selector {
  display: flex;
  width: 100%;
  height: 100%;
  justify-content: space-between;
}

/* Blue selection frame */
.date-highlight {
  position: absolute;
  top: 50%;
  left: 0px;
  right: 0px;
  height: 50px; /* Height of the selection row */
  margin-top: -36px; /* Exactly half the height to center */
  border-top: 2px solid #2962ff;
  border-bottom: 2px solid #2962ff;
  pointer-events: none;
  z-index: 10;
  border-radius: 8px;
}

/* Screen 34 */

.video-container {
  display: flex; 
  justify-content: center; 
  margin-bottom: -20px;
}

/* Swiper settings */
.swiper {
  /* width: 32%; removed */
  height: 100%;
  overflow: hidden;
  /* Mask for smooth fade at top and bottom */
  mask-image: linear-gradient(to bottom, transparent 0%, black 35%, black 65%, transparent 100%);
  -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 35%, black 65%, transparent 100%);
}

/* Individual column widths */
.swiper-month {
  width: 45%; /* Months need more space */
}
.swiper-day {
  width: 20%; /* Days need the least */
}
.swiper-year {
  width: 35%; /* Years medium */
}

.swiper-slide {
  display: flex;       /* Enable Flexbox */
  align-items: center; /* Center text vertically */
  justify-content: center; /* Center text horizontally */
  font-size: 18px;
  color: #a0a0a0;
  height: 50px !important; /* Fix slide height */
  cursor: pointer;
  user-select: none;
  transition: all 0.2s;
    /* Ensure text doesn't wrap */
  white-space: nowrap; 
  overflow: visible;
}

/* Active element (centered) */
.swiper-slide-active {
  color: #111;
  font-weight: 700;
  font-size: 22px;
  transform: scale(1.1);
  z-index: 100;
}

/* =========================
   SCREEN 25: RESULT & REVIEW (DESKTOP FIRST)
   ========================= */

/* 1. BASE STYLES (FOR DESKTOP) */

/* General container */

.result-split {
  display: flex;
  flex-direction: row;
  justify-content: center;
  align-items: flex-start;
  gap: 40px;
  width: 100%;
  max-width: 900px;
  margin: 60px auto 0;
} 

/* Container for photo */
.result-animation-wrap {
  position: relative;
  flex: 1;       /* Flexibility: takes 1 share of space */
  width: auto;   /* Automatic width */
  max-width: 400px; 
  aspect-ratio: 4 / 3; /* Photo proportions */
  border-radius: 20px;
  overflow: hidden;
  line-height: 0;
  flex-shrink: 0;
}

/* Main photo */
.result-base-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* Moving strip */
.result-moving-figure {
  position: absolute;
  top: 0; bottom: 0; left: 0;
  height: 100%;
  width: auto;
  animation: moveRight 5s infinite linear;
}

@keyframes moveRight {
  0% { left: -20%; }
  100% { left: 650%; }
}

/* Review block */
.review-block {
  flex: 1;       /* Flexibility: takes 1 share of space */
  width: auto;
  max-width: 400px;
  text-align: left;
}

.review-header-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.review-name {
  font-weight: 800;
  font-size: 18px;
  color: var(--c-text-main);
}

.review-stars {
  color: #FFD600;
  font-size: 20px;
  letter-spacing: 2px;
}

/* --- Toggle --- */
.units-toggle-wrapper {
  display: flex;
  background-color: #F2F2F7; /* Light gray background for the plate */
  border-radius: 50px;        /* Rounded like iOS */
  padding: 3px;
  margin: 0 auto 20px auto;  /* Margins */
  max-width: 300px;          /* Limit toggle width */
}

.toggle-btn {
  flex: 1;
  border: none;
  background: transparent;
  padding: 10px 0;
  border-radius: 50px;
  font-size: 14px;
  font-weight: 700;
  cursor: pointer;
  color: #000;
  transition: all 0.2s ease;
}

/* Active state (blue button) */
.toggle-btn.active {
  background-color: #485AFF; /* SlimKit color */
  color: #fff;
  /* box-shadow: 0 2px 4px rgba(0,0,0,0.15);*/ /* old button shadow */
  box-shadow: 0 6px 16px rgba(41, 98, 255, 0.25);
}



/* --- SCREEN 26 --- */

.h4 { font-size: 14px; font-weight: 500; line-height: 1.25;}

/* --- Inputs --- */
.height-input-area {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100px;
}

.input-group-row {
  display: flex;
  align-items: baseline; 
  gap: 10px;
}

.input-sub-group {
  display: flex;
  align-items: baseline;
  gap: 8px;
  margin: 0 10px;
}

/* Hidden element */
.hidden {
  display: none !important;
}

/* Input style (huge digits) */
.input-huge {
  border: none;
  border-bottom: 2px solid #E5E5E5; 
  font-size: 28px;
  font-weight: 500;
  text-align: center;
  width: 100px;
  padding-bottom: 5px;
  background: transparent;
  outline: none;
  color: #000;
  border-radius: 0;
}

.input-huge:focus {
  border-bottom-color: #485AFF;
}

/* For feet, fields slightly narrower */
.input-short {
  width: 60px;
}

.unit-text {
  font-size: 20px;
  font-weight: 600;
  color: #000;
}

.info-banner {
  display: flex;
  flex-direction: column;
  background: var(--c-bg-surface); /* Or default color */
  border-radius: var(--radius-card);
  width: 340px;
  height: auto;
  padding: 20px;
  margin: auto;
  margin-top: 20px;
  gap: 10px;
  justify-content: start;
  align-items: start;
  transition: background-color 0.3s ease; /* Smooth color transition */
}

/* ERROR state */
.info-banner.error {
  background-color: #FFF0F0; /* Pink background as in reference */
}

.icon-and-text {
  display: flex;
  flex-direction: row;
  gap: 10px;
  text-align: left;
  align-items: flex-start;
}

.info-banner-text {
  display: flex;
  font-size: 12px;
  font-weight: 400;
  color: var(--c-text-sub);
  width: 100%;
  text-align: left;
}

/* SUCCESS state for the plate (Green) */
.info-banner.success {
  background-color: #E8F5E9; /* Light green background */
}

/* Style for inactive button (gray), when disabled attribute is present */
/* When disabled is removed via JS, the button automatically becomes gradient (btn--primary) */
.btn--primary:disabled {
  background: #E5E5EA; 
  color: #8E8E93;
  box-shadow: none;
  cursor: not-allowed;
  transform: none;
}

/* =========================
   SCREEN 29: PROFILE
   ========================= */

/* Profile Card (Top) */
.profile-card {
  width: 100%;
  border-radius: 20px;
  padding: 0px; /* Uniform padding on all sides for correct display of inner plate */
  margin-bottom: 16px;
  transition: background-color 0.3s ease;
  display: flex;
  flex-direction: column;
  align-items: center;
  overflow: hidden; /* So card rounding cuts the nested plate */
}

/* Color themes for the top card */
.profile-card--green { background-color: #eafbf0; } /* Green (Ref 1) */
.profile-card--blue  { background-color: #eaf8ff; } /* Blue (Ref 3) */
.profile-card--red   { background-color: #fff2f6; } /* Red (Ref 4) */

/* Height / Weight Block */
.profile-stats-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  margin: 8px 8px 20px 8px; /* Set outer margins from card edges */
  width: auto; /* Allow margin to work correctly */
  align-self: stretch;
  height: 60;
  /* New styles to match reference */
  background-color: rgba(255, 255, 255, 0.5); /* Semi-transparent white for color overlay */
  border-radius: 16px;
  padding: 16px 0;
  transition: background-color 0.3s ease;
}

/* Add specific colors for inner plate depending on card state */
.profile-card--green .profile-stats-row { background-color: #e1f6e9; }
.profile-card--blue .profile-stats-row  { background-color: #e0f1fa; }
.profile-card--red .profile-stats-row   { background-color: #fee5eb; }

.profile-stat {
  display: flex;
  flex-direction: column;
  align-items: center;
  flex: 1;
  gap: 6px;
}

.profile-stat__label { 
  font-size: 13px; 
  font-weight: 400; 
  color: #868686; 
  margin-bottom: 4px; 
}

.profile-stat__value { 
  font-size: 20px; 
  font-weight: 700; 
  color: #111; 
}

.profile-stat-divider {
  width: 1px;
  height: 40px;
  background-color: rgba(0,0,0,0.1);
  flex-shrink: 0; /* So the dash doesn't shrink */
}

.profile-bmi-row {
  font-size: 16px;
  font-weight: 600;
  margin-bottom: 16px;
}

/* Scale with image (Top) */
.scale-wrapper {
  position: relative;
  width: 100%;
  max-width: 360px;
  margin: 0 auto 20px;
}

.scale-labels {
  display: flex;
  justify-content: space-between;
  padding: 0 15%; /* Margins roughly match image 29.1 */
  font-size: 10px;
  color: #888;
  margin-bottom: 4px;
}
/* Slightly shift labels to align with image divisions */
.scale-labels span:nth-child(1) { margin-left: 5%; }
.scale-labels span:nth-child(4) { margin-right: 5%; }

.scale-track-img-wrap {
  position: relative;
  width: 100%;
  height: auto; /* Height of the strip in the image */
  margin-bottom: 6px;
}

.scale-track-img {
  width: 100%;
  height: 100%;
  object-fit: fill; 
  border-radius: 99px;
  display: block;
}

.scale-labels-grid {
  display: grid;
  /* Create 5 absolutely equal columns */
  grid-template-columns: repeat(5, 1fr);
  width: 100%;
  margin-top: 8px;
  /* Ensure padding matches image padding if any */
  box-sizing: border-box;
}

.scale-labels-grid span {
  text-align: center;
  color: #333;
  
  /* Dynamic font size:
     12px — minimum size
     2.5vw — font grows with screen width
     16px — (optional) maximum limit so text doesn't get huge
  */
  font-size: clamp(8px, 2.5vw, 10px);
  
  /* Ensure text doesn't wrap and break the grid */
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.scale-numbers-grid {
  display: grid;
  /* Create the same 5 columns as for the scale */
  grid-template-columns: repeat(5, 1fr);
  width: 100%;
  margin-bottom: 4px;
}

.scale-numbers-grid span {
  font-size: clamp(8px, 2vw, 12px);
  color: #888;
  /* Center text relative to the line, not the cell */
  width: 0; 
  display: flex;
  justify-content: center;
  white-space: nowrap;
}

/* Position each number on the corresponding grid line */
.num-18 { grid-column: 2; } /* Start of 2nd column (border of 1 and 2) */
.num-25 { grid-column: 3; } /* Start of 3rd column (border of 2 and 3) */
.num-28 { grid-column: 4; } /* Start of 4th column (border of 3 and 4) */
.num-32 { grid-column: 5; } /* Start of 5th column (border of 4 and 5) */

/* Triangle for gradient scale */
.scale-triangle {
  position: absolute;
  top: 0; 
  width: 0; 
  height: 0; 
  border-left: 8px solid transparent;
  border-right: 8px solid transparent;
  border-top: 10px solid #000; /* Black triangle pointing down */
  transform: translateX(-50%);
  transition: left 0.5s ease;
}

/*.scale-legend {
  display: flex;
  justify-content: space-between;
  font-size: 9px;
  font-weight: 500;
  color: #111;
}*/

/* Message plate at bottom of color card */
.profile-message-box {
  width: 100%;
  border-radius: 0px 0px 12px 12px;
  padding: 12px;
  font-size: 14px;
  font-weight: 700;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  transition: background-color 0.3s ease;
}

/* Color themes for message plate */
.profile-message-box--green { background-color: #baffce; }
.profile-message-box--blue  { background-color: #d1f1ff; }
.profile-message-box--red   { background-color: #ffdce5; }

/* Bottom Gray Card */
.profile-gray-card {
  background-color: #f5f5f5;
  border-radius: 20px;
  padding: 24px 20px;
  width: 100%;
  padding-left: 60px;
  padding-right: 60px;
}

/* CSS Scale (3 divisions) */
.css-scale-container {
  position: relative;
  width: 100%;
  margin-bottom: 24px;
  padding-top: 12px; /* Space for triangle, if it's on top, but we have it on the scale */
}

.css-scale-track {
  display: flex;
  height: 12px;
  width: 100%;
  border-radius: 6px;
  overflow: hidden;
  gap: 2px; /* Gap between segments */
}

.css-scale-seg {
  flex: 1;
  background-color: #d5d9e5; /* Gray by default */
  transition: background-color 0.3s;
}

/* Segment colors */
.css-scale-seg.blue { background-color: #448AFF; } /* As in ref 3 */
.css-scale-seg.green { background-color: #9cffbb; } /* As in ref 1 */
.css-scale-seg.red { background-color: #FF5252; }   /* As in ref 4 */

/* Triangle for CSS scale */
.scale-triangle-css {
  position: absolute;
  top: 4px; /* Position directly on the strip */
  width: 0; 
  height: 0; 
  border-left: 6px solid transparent;
  border-right: 6px solid transparent;
  border-top: 8px solid #000;
  transform: translateX(-50%);
  transition: left 0.5s ease;
  z-index: 5;
}

.profile-info-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 13px;
  margin-top: 12px;
}

.profile-info-label {
  color: #111;
  font-weight: 500;
  text-align: left;
}

.profile-info-val {
  font-weight: 700;
  color: #111;
}

/* SCREEN 33 */
.summary-flex {
  display: flex;
  gap: 24px;
  width: 100%;
  margin-top: 20px;
}

.summary-column {
  flex: 1;
}

.summary-column--chart {
  background: #f5f8ff;
  border-radius: 20px;
  padding: 30px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.summary-subtitle {
  font-size: 18px;
  line-height: 1.4;
  color: #111;
  text-align: center;
  margin-bottom: 10px;
}

/* Chart and badge container */
.chart-container {
  display: flex;
  flex-direction: column; /* Elements go one after another vertically */
  align-items: center;
  width: 100%;
  max-width: 450px;
}

/* Common container for badges, copy date logic */
.chart-weights {
  display: flex;
  justify-content: space-between;
  width: 100%;
  padding: 0 4px;
  margin-bottom: 5px; /* Small gap before chart */
}
/* Adjust date container for symmetry */
.chart-dates {
  display: flex;
  justify-content: space-between;
  width: 100%;
  margin-top: 15px;
  padding: 0 10px;
  font-size: 12px;
  color: #7e7e7e;
  font-weight: 600;
}

/* Base badge style (remove old top/left) */
.weight-badge {
  position: relative; /* Allows moving the badge relative to its place in the row */
  padding: 4px 12px;
  border-radius: 12px;
  font-size: 14px;
  font-weight: 700;
  color: #fff;
  white-space: nowrap;
  z-index: 2;
}

/* PRECISE ADJUSTMENT ABOVE CHART POINTS
   Use top (negative - up, positive - down) 
   and left for horizontal adjustment within the flex block.
*/
.weight-badge--1 { 
  background-color: #485AFF; 
  top: 0px; /* Shift to the highest point */
  left: -2px; 
}

.weight-badge--2 { 
  background-color: #485AFF; 
  top: 30px; /* Lower to the second point */
  left: 0px; 
}

.weight-badge--3 { 
  background-color: #00D26A; 
  top: 65px; /* Even lower to the third point */
  left: 2px; 
}

.weight-badge--4 { 
  background-color: #00D26A; 
  top: 65px; /* Level with the third point */
  left: 8px; 
}

.chart-img {
  width: 100%;
  height: auto;
  display: block;
  z-index: 1;
  padding-left: 14px;
  padding-right: 14px;
}

/* REVIEWS */
/* Container for all cards */
.summary-column--reviews {
  display: flex;
  flex-direction: column;
  gap: 16px;
  max-width: 600px; /* Width for your design */
  margin: 0 auto;
}

/* The card itself */
.review-card {
  background: #ffffff;
  border-radius: 16px; /* Card rounding */
  padding: 13px 10px 10px;
  display: flex; /* Align avatar and content in a row */
  gap: 20px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05); /* Soft card shadow */
  align-items: flex-start;
}

/* Left part (Avatar + Name) */
.review-avatar-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  min-width: 80px;
}

.avatar-wrapper {
  width: 70px;
  height: 70px;
  border-radius: 50%;
  border: 1px solid #FFB300; /* Yellow border from reference */
  padding: 3px;
  margin-bottom: 8px;
}

.review-avatar {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  object-fit: cover;
}


/* Right part (Review text) */
.review-content {
  flex: 1;
}

.review-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
}

.review-stars {
  height: 18px; /* Adjust star image size */
  object-fit: contain;
}

.review-rating {
  font-size: 12px;
  font-weight: 700; /* Bold rating 4.5 / 5.0 */
  color: #111;
  margin: 0;
}

.review-text {
  font-size: 12px;
  line-height: 1.4;
  color: #111;
  margin: 0;
  font-weight: 400;
}
.review-names {
  font-size: 10px;
  font-weight: 500;
  font-style: italic; /* Name Joe_88 in italics */
  color: #111;
  margin: 0;
}

/* Disabled state for navigation arrows */
.btn-arrow.disabled {
  opacity: 0.2;
  pointer-events: none;
  cursor: default;
}

/* Also ensure footer buttons are visually blocked */
.btn:disabled {
  background: #E5E5EA !important; 
  color: #8E8E93 !important;
  box-shadow: none !important;
  cursor: not-allowed !important;
  transform: none !important;
}

@media (max-width: 940px) {

  .summary-column .summary-column--chart {
    height: auto;
  }

  .chart-container {
  width: 350px;
  }

  .chart-img {
    padding-left: 10px;
    padding-right: 8px;
  }

  .weight-badge {
    /* Reduce font and padding proportionally to screen width */
    /* Use clamp so size doesn't get smaller than needed at 320px */
    font-size: 10px; 
    padding: clamp(2px, 1vw, 4px) clamp(6px, 2.5vw, 12px);
  }

   .chart-dates {
    font-size: 10px; 
  }

   .summary-subtitle {
    font-size: 16px; 
  }

  .weight-badge--1 { top: 2px; }
  .weight-badge--2 { top: 30px; }
  .weight-badge--3 { top: 55px; }
  .weight-badge--4 { top: 55px; }

  }

/* MEDIA */
@media (min-width: 768px) {
  .nav-header { padding-right: calc(20px + var(--scrollbar-width, 0px));}
  .grid-age { grid-template-columns: repeat(4, auto); gap: 60px; }
  .grid-2 { grid-template-columns: repeat(2, 1fr); gap: 20px; }
  .card-person__img-wrap { width: 180px; height: 180px; }
  .text-h1 { font-size: 40px; }
  .zones-layout { gap: 40px; }
  .zones-layout__image { height: auto; }
  .zones-stack { position: sticky; top: 90px; height: auto; min-height: 400px; }
}

/* =========================
   7. MEDIA QUERIES (MOBILE)
   ========================= */
@media (max-width: 767px) {
  :root { 
    --header-py: 30px;
    --footer-pb: 20px; 
    --header-height: 80px; 
    --footer-height: 140px;
  }
  /* In mobile version, hide the logo (as previously agreed) */
  .header-logo {
    display: none;
  }

    /* 1. SCREEN 32 */
  /* ... your previous styles ... */

  /* 1. Reduce overall container height (5 rows * 25px = 125px) */
  .date-selector-wrapper {
    width: 90%;
    height: 200px !important; 
  }

  /* 2. Adjust row height */
  .swiper-slide {
    height: 40px !important;     /* Your desired height */
    font-size: 14px !important;  /* Font also needs to be reduced to fit */
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
  }

  /* 3. Active font slightly larger */
  .swiper-slide-active {
    font-size: 16px !important;
    font-weight: 700 !important;
  }

  /* 4. Adjust the blue frame */
  .date-highlight {
    height: 40px !important;        /* Frame should be row height */
    margin-top: -20px !important; /* Exactly half of 25px to center */
    border-radius: 6px;             /* Slightly reduce rounding for neatness */
  }

  /* Increase active font for better look */
  .swiper-slide-active {
    font-size: 20px !important;
    font-weight: 700 !important;
  }

  /* Typography */
  .text-display { font-size: 36px; }
  .text-h1 { font-size: 26px; }
  .text-h1-large { font-size: 30px; }
  
  /* 2. RETURN THE FIX FOR H2 */
  .h2 { 
    font-size: 24px; 
    font-weight: 700; 
    line-height: 1.25; 
    margin-bottom: 12px; 
  } 
  .h2-wide { 
    font-size: 24px; 
    font-weight: 700; 
    line-height: 1.25; 
    margin-bottom: 12px; 
    margin: auto; 
    max-width: 350px;
  } 
  .h3 {font-size: 24px;}
  
  .text-subtitle { font-size: 16px; margin-bottom: 16px; }
  .card__subtitle { font-size: 12px; color: var(--c-text-sub); font-weight: 400; margin-top: 4px; line-height: 1.4; }
  
  /* Cards */
  .card-person__img-wrap { width: 120px; height: 120px; }
  .image-container-card { margin: 22px 0; }
  .btn--age { font-size: 14px; padding: 6px 12px; margin-top: -15px; }
  .btn { width: 100%; padding: 14px 20px; }
  
  /* Grids */
  .grid-age { margin-top: 30px; gap: 16px; }
  
  /* Content padding */
  .split-layout__top { 
    flex: 0 0 auto; 
    width: 100%; 
    text-align: center; 
    padding-top: 40px; 
    padding-left: 20px; 
    /*padding-right: 20px; */
    z-index: 10; 
  }
  .layout-main { 
    /* Now this value is controlled via JS variable --footer-h */
    /* padding-bottom: calc(var(--footer-h, 120px) + 20px) !important; */
    padding-bottom: calc(var(--footer-h, 120px) + 20px + env(safe-area-inset-bottom)) !important;
  }
  .split-layout__bottom { padding-bottom: 16px; }

  /* --- 1. RETURN THE PROGRESS BAR STRETCHING --- */
  
  /* Remove header block padding */
  .nav-header { 
    padding-top: 40px; 
    padding-left: 0; 
    padding-right: 0; 
  }

  /* Move padding to inner container (to match content) */
  .nav-header__content { 
    width: 100%; 
    padding: 0 14px; 
    box-sizing: border-box; 
    gap: 5px;
  }

  .nav-header.nav-header--final {
    display: none !important;
  }
  
  /* Make bar take all available space */
  .step-progress {
    max-width: none; 
    flex: 1; 
    width: auto; 
    margin: 0 10px; 
  }
  
  /* Smaller dots for mobile */
  .step-dot {
    width: 10px;
    height: 10px;
  }
  
  .result-split {
    flex-direction: column; /* Switch to column */
    align-items: center;
    margin-top: 0;
    padding-top: 10px;
    gap: 24px;
  }

  .result-animation-wrap {
    width: 100%; /* On mobile, photo full width */
    flex: none;  /* Disable flex flexibility */
  }

  .review-block {
    width: 100%; /* On mobile, text full width */
    flex: none;
  }

  /* =========================
   FIXED FLEXIBLE ADAPTATION FOR SCREEN 29
   ========================= */

  .scale-wrapper {
  position: relative;
  width: 100%;
  max-width: 360px;
  margin: 0 auto 20px;
  padding-left: 16px;
  padding-right: 16px;
  }
  /* Override fixed width from HTML and CSS */
  #view-29 .container-narrow {
    width: 100% !important; 
    max-width: 100% !important;
    padding: 0px !important;
    box-sizing: border-box !important;
  }

  /* Force cards to take 100% of parent width */
  .profile-card {
    width: 100% !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
  }

  .profile-gray-card {
    width: 100% !important;
    max-width: 100% !important;
    padding-left: 16px !important;
    padding-right: 16px !important;
    box-sizing: border-box !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
  }

  /* Adaptive fonts via clamp */
  #view-29 .h2 {
    font-size: clamp(22px, 6vw, 28px) !important;
  }

  /* Fix scale grids: they will now shrink */
  .scale-labels-grid, 
  .scale-numbers-grid {
    display: grid !important;
    width: 100% !important;
    gap: 0 !important;
  }

  .scale-labels-grid span, 
  .scale-numbers-grid span {
    /* Font will shrink to 8px on very narrow screens */
    font-size: clamp(8px, 2.2vw, 11px) !important;
    white-space: nowrap;
  }

  /* Inner Height/Weight plate */
  .profile-stats-row {
    margin: 8px 8px 20px 8px !important;
    width: auto !important;
  }

  /* Gray card: remove side 60px padding that broke the view */
  .profile-gray-card {
    padding: 20px 16px !important;
  }

  /* Mobile adaptation */
  .summary-flex {
    flex-direction: column;
    gap: 0;
  }
  
  .summary-column--chart {
    background: transparent;
    padding: 0;
    margin-bottom: 24px;
  }
  
  .summary-subtitle {
    margin-bottom: 40px;
    font-size: 16px;
    max-width: 350px;
  }

  .weight-badge {
    font-size: 12px;
  }

  .review-card {
    max-width: 500px;
  }

  .chart-container {
  max-width: 400px;
  }

  .chart-img {
  width: 100%;
  height: auto;
  display: block;
  z-index: 1;
  padding-left: 10px;
  padding-right: 10px;
  }


  /* SCREENS 26-28 */
  /* Remove extra space under titles on input screens */
  #view-26 .h2, 
  #view-27 .h2, 
  #view-28 .h2 {
    margin-bottom: 20px !important; /* Was 60px in HTML */
  }
  .units-toggle-wrapper {
    margin: 0 auto 0px auto; 
  }

  /* Slightly raise the Done button */
  .inline-footer {
    margin-top: 20px !important;
    padding-bottom: 20px; /* Extra bottom air */
  }
}

/* Adapt weight badges for mobile devices */
@media (max-width: 500px) {

  .chart-container {
  width: 290px;
}

  .weight-badge {
    /* Reduce font and padding proportionally to screen width */
    /* Use clamp so size doesn't get smaller than needed at 320px */
    font-size: 10px; 
    padding: clamp(2px, 1vw, 4px) clamp(6px, 2.5vw, 12px);
  }

  .chart-dates {
    font-size: 10px; 
  }
  /* Adjust vertical offsets (top) if necessary,
     as the chart may shrink in height on mobile */
  .weight-badge--1 { top: 0px; }
  .weight-badge--2 { top: 20px; }
  .weight-badge--3 { top: 45px; }
  .weight-badge--4 { top: 45px; }

  .content-img { height: 150px; width: auto; border-radius: 20px; object-fit: contain; }
  .content-image-wrap { display: flex; justify-content: center; margin-top: 10px !important; margin-bottom: 0px !important;}
}

@media (max-width: 330px) {

  .nav-header__content {
    gap: 2px;
    padding-right: 10px;
    padding-left: 10px;
  }
  .layout-footer {
    padding-bottom: 25px;
  }
  .link {
    font-size: 14px;
  }

  .split-layout__center {
    padding-bottom: auto !important;
  }

  .card-checkbox__title {
    font-size: 16px;
  }
  .card-zone__title {
    font-size: 14px;
  }
  .card__title {
    font-size: 16px;
  }
  .card-zone {
    gap: 4px;
  }


  .card {
    height: 80px !important;
  }
  .card-person__img-wrap { width: 95px; height: 95px; }
  .btn--age { font-size: 12px; padding: 3px 8px; margin-top: -15px; }
  .btn { width: 100%; padding: 12px 18px; }
  .card-person{width: 120px;}
  
  /* Grids */
  /*.grid-age { margin-top: 30px; gap: 16px; width: auto;}*/
  .grid-system { display: grid; width: auto; gap: 8px; } 
  .grid-age { grid-template-columns: repeat(2, auto); justify-content: center; gap: 16px; margin-top: 30px; }

  .h2 {font-size: 20px;}
  .h2-wide {font-size: 20px;}
  .h3 {font-size: 22px; margin-top: 12px !important;}
  .text-subtitle {font-size: 14px;}
  .image-container-card { 
    border-radius: 12px; 
    width: 100%; 
    padding: 12px; 
    margin: 12px 0; 
 }
  .content-img {
    border-radius: 12px;
  }

}

/* ANALYSIS SCREEN */
.analysis-icon-wrap { position: relative; width: 80px; height: 80px; margin: 0 auto; }

.analysis-spinner {
  position: absolute; inset: 0;
  border: 4px solid #f3f3f3;
  border-top: 4px solid var(--c-primary);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

.analysis-logo-small {
  position: absolute; top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  width: 30px; height: auto;
}

.analysis-list { margin-top: 40px; text-align: left; max-width: 320px; margin-left: auto; margin-right: auto; }

.analysis-item {
  display: flex; align-items: center; gap: 16px; margin-bottom: 24px;
  opacity: 0.3; transition: opacity 0.5s ease;
}

.analysis-item.completed { opacity: 1; }

.check-circle {
  width: 28px; height: 28px; border-radius: 50%;
  border: 2px solid #e0e0e0; display: flex; align-items: center; justify-content: center;
  color: transparent; transition: all 0.4s ease;
}

.analysis-item.completed .check-circle {
  background-color: var(--c-primary); border-color: var(--c-primary); color: #fff;
}

.check-circle svg { width: 16px; height: 16px; transform: scale(0.5); transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }

.analysis-item.completed .check-circle svg { transform: scale(1); }

.analysis-text { font-size: 16px; font-weight: 600; color: #111; }


/* 2. TIMELINE LIST */
.timeline-list {
  position: relative;
  display: flex;
  flex-direction: column;
  gap: 40px; /* Distance between items */
  text-align: left;
  padding-left: 20px; /* Small padding */
  max-width: 350px;
  margin: auto;
}

/* Lines (track) */
.timeline-track {
  position: absolute;
  top: 15px; /* Start from center of first dot */
  bottom: 30px; /* End near center of last (approx) */
  left: 35px; /* Center relative to icon (10px padding + 15px half icon width) */
  width: 2px;
  z-index: 0;
}

.timeline-line-dotted {
  width: 100%; 
  height: 100%;
  border-left: 2px dotted #E0E0E0; /* Gray dotted */
  position: absolute; 
  top: 0; 
  left: 0;
}

.timeline-line-fill {
  width: 2px;
  background-color: var(--c-primary);
  height: 0%; /* Will be changed via JS */
  position: absolute; top: 0;
  transition: height 3.0s linear;
}

/* List item */
.timeline-item {
  position: relative;
  z-index: 1;
  display: flex;
  align-items: center;
  gap: 20px;
  opacity: 1; /* All visible, but color differs */
}

/* Marker (Circle) */
.timeline-marker {
  position: relative;
  width: 32px; height: 32px;
  flex-shrink: 0;
  display: flex; align-items: center; justify-content: center;
}

.marker-circle {
  width: 32px; height: 32px;
  border-radius: 50%;
  border: 2px solid #E0E0E0; /* Gray border by default */
  background: #fff;
  display: flex; align-items: center; justify-content: center;
  transition: all 0.3s ease;
  z-index: 2;
}

.icon-check {
  width: 16px; height: 16px;
  opacity: 0;
  transform: scale(0.5);
  transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* Text */
.timeline-text {
  font-size: 16px;
  font-weight: 500;
  color: #BDBDBD; /* Gray text by default */
  transition: color 0.3s;
}

/* --- STATES --- */

/* Active (Pulsing current step) */
.timeline-item.active .timeline-text { color: var(--c-text-main); }
.timeline-item.active .marker-circle {
  border-color: var(--c-primary);
  background: #fff;
}

/* Pulsing Animation Layer */
.marker-pulse {
  position: absolute;
  top: 50%; left: 50%;
  width: 32px; height: 32px;
  background: rgba(41, 98, 255, 0.4);
  border-radius: 50%;
  transform: translate(-50%, -50%) scale(1);
  z-index: 1;
  opacity: 0;
}

.timeline-item.pulsing .marker-pulse {
  animation: pulse-ring 1s infinite;
}
.timeline-item.pulsing .marker-circle {
  border-color: var(--c-primary);
}
.timeline-item.pulsing .timeline-text {
  color: var(--c-text-main);
}

@keyframes pulse-ring {
  0% { transform: translate(-50%, -50%) scale(1); opacity: 0.6; }
  100% { transform: translate(-50%, -50%) scale(2.5); opacity: 0; }
}

/* Completed (Finished step) */
.timeline-item.completed .marker-circle {
  background-color: var(--c-primary);
  border-color: var(--c-primary);
}
.timeline-item.completed .icon-check {
  opacity: 1;
  transform: scale(1);
}
.timeline-item.completed .timeline-text {
  color: var(--c-text-main);
}


/* =========================
   POPUPS / MODALS (Ref 3 & 4)
   ========================= */
.modal-overlay {
  position: fixed; 
  inset: 0;
  /* Removed blur, kept only darkening */
  background: rgba(0, 0, 0, 0.6); 
  /* backdrop-filter: blur(4px); <-- REMOVED */
  
  /* Set z-index higher than nav-header (500) to overlay menu and logo */
  z-index: 2000; 
  
  display: flex; align-items: center; justify-content: center;
  padding: 20px;
  opacity: 0; visibility: hidden; pointer-events: none;
  transition: all 0.3s ease;
}

.modal-overlay.visible {
  opacity: 1; 
  visibility: visible;
  pointer-events: auto;
  z-index: 999;
}

.modal-card {
  background: #fff;
  width: 100%; max-width: 340px;
  border-radius: 24px;
  padding: 40px 24px 24px;
  text-align: center;
  box-shadow: 0 20px 40px rgba(0,0,0,0.2);
  transform: scale(0.9); transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  z-index: 1000;
}
.modal-overlay.visible .modal-card { transform: scale(1); }

/* Icons inside modals */
.modal-loader-icon {
  display: flex; justify-content: center; gap: 8px; margin-bottom: 24px;
}
.dot-static { width: 16px; height: 16px; border-radius: 50%; }

.modal-loader-icon-tri {
  position: relative; width: 40px; height: 36px; margin: 0 auto 24px;
}
.dot-tri { position: absolute; width: 14px; height: 14px; border-radius: 50%; background: #D32F2F; }

/* Buttons inside modals */
.modal-btn-group { display: flex; flex-direction: column; gap: 12px; }
.btn-modal {
  background: #F5F5F5;
  border: none;
  border-radius: 16px;
  padding: 16px;
  font-size: 16px; font-weight: 600; color: #111;
  cursor: pointer;
  transition: background 0.2s;
}
.btn-modal:active { background: #E0E0E0; transform: scale(0.98); }

/* =========================
   SCREEN 35: EMAIL INPUT STYLES
   ========================= */

.email-container {
  width: 100%;
  max-width: 400px;
  margin: 0 auto 20px;
}

.input-email {
  width: 100%;
  height: 60px;
  border-radius: 12px; /* Rounding as in references */
  padding: 0 24px;
  font-size: 18px;
  font-weight: 400;
  outline: none;
  font-family: var(--font-main);
  transition: all 0.2s ease;
  
  /* State 3.1: Default (Ref 3) - White background, blue border */
  background-color: #ffffff;
  border: 1px solid var(--c-primary); /* Blue border color */
  color: var(--c-text-main);
}

.input-email::placeholder {
  color: #9E9E9E; /* Gray placeholder */
}

/* State 3.2: Focus, but still empty (Ref 4) - Light blue background */
.input-email:focus {
  background-color: #E8F0FE; /* Light blue background */
  border-color: var(--c-primary);
}

/* State 3.3: Value entered (Ref 5) - Light blue background remains */
/* :not(:placeholder-shown) triggers when field has text */
.input-email:not(:placeholder-shown) {
  background-color: #E8F0FE;
  border-color: var(--c-primary);
}

/* Block with lock */
.secure-note {
  display: flex;
  align-items: flex-start; /* Align to top */
  justify-content: center;
  gap: 12px;
  max-width: 380px;
  margin: 0 auto;
  padding-left: 10px;
  padding-right: 10px;
}

.secure-icon-wrap {
  flex-shrink: 0;
  margin-top: 2px; /* Slight correction to align icon with text */
}

.secure-img {
  width: 16px; /* Lock icon size */
  height: auto;
  display: block;
}

/* Modifier for text-legal to align text left */
.text-legal--left {
  text-align: left !important;
  margin: 0 !important;
  color: #888888; /* Slightly darker gray for readability */
  line-height: 1.4;
}

/* =========================
   SCREEN 35: DESKTOP CARD
   ========================= */

/* Base styles (Mobile - Ref 2) */
.email-content-card {
  width: 100%;
  background: transparent;
  padding: 0;
  border-radius: 0;
}

/* Settings only for DESKTOP (Ref 1) */
@media (min-width: 768px) {
  .email-content-card {
    background-color: var(--c-bg-surface); /* Use global blue color #f5f8ff */
    border-radius: 24px;
    padding: 60px 80px; /* Inner card padding */
    margin: 0 auto;
    
    /* Center content inside */
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  /* Slightly increase container width on this screen for a roomier card look */
  #view-35 .container-narrow {
    max-width: 650px;
  }
}

/* =========================
   PROGRESS BUTTON (Screen 25)
   ========================= */

.btn-progress-wrapper {
  position: relative;
  width: 100%;
  max-width: 320px; /* Standard button width */
  height: 56px;
  background-color: #C7D2FE; /* Light lilac track background (as in ref) */
  border-radius: 99px;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto;
  cursor: default; /* Default cursor until filled */
  transition: transform 0.1s ease;
  user-select: none;
}

.btn-progress-fill {
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  width: 0%; /* Will be changed via JS */
  background-color: var(--c-primary); /* Your main blue #2962ff */
  z-index: 1;
  /* transition: width 0.1s linear; -> Remove transition here, as we'll animate via JS requestAnimationFrame for smoothness */
}

.btn-progress-text {
  position: relative;
  z-index: 2; /* Text above fill */
  font-size: 20px;
  font-weight: 700;
  color: var(--c-accent); /* Yellow #ffd600 */
}

/* Ready state (at 100%) */
.btn-progress-wrapper.ready {
  cursor: pointer;
  box-shadow: 0 6px 16px rgba(41, 98, 255, 0.25);
}

.btn-progress-wrapper.ready:active {
  transform: scale(0.98);
}

/* ========== COOKIE BANNER - BLUE BANNER AT BOTTOM ========== */
.cookie-banner {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: white;
  box-shadow: 0 -4px 20px rgba(41, 98, 255, 0.15);
  z-index: 10000;
  font-family: 'Inter', sans-serif;
  transform: translateY(100%);
  transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  border-top: 3px solid var(--c-primary);
}

.cookie-banner.visible {
  transform: translateY(0);
}

.cookie-banner__container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px 24px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 24px;
  flex-wrap: wrap;
}

.cookie-banner__content {
  flex: 1;
  min-width: 280px;
}

.cookie-banner__header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
}

.cookie-banner__icon {
  width: 24px;
  height: 24px;
  color: var(--c-primary);
}

.cookie-banner__title {
  font-weight: 700;
  font-size: 16px;
  color: var(--c-text-main);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.cookie-banner__text {
  font-size: 14px;
  line-height: 1.5;
  color: var(--c-text-sub);
  margin: 0;
}

.cookie-banner__link {
  color: var(--c-primary);
  text-decoration: underline;
  cursor: pointer;
  font-weight: 600;
  transition: opacity 0.2s;
}

.cookie-banner__link:hover {
  opacity: 0.8;
  text-decoration: none;
}

.cookie-banner__actions {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
}

.cookie-banner__btn {
  padding: 12px 28px;
  border-radius: var(--radius-btn);
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  border: none;
  white-space: nowrap;
}

.cookie-banner__btn--settings {
  background: var(--c-bg-surface);
  color: var(--c-primary);
  border: 1px solid var(--c-primary);
}

.cookie-banner__btn--settings:hover {
  background: rgba(41, 98, 255, 0.05);
  transform: translateY(-2px);
}

.cookie-banner__btn--accept {
  background: var(--c-primary);
  color: white;
  box-shadow: 0 6px 16px rgba(41, 98, 255, 0.25);
}

.cookie-banner__btn--accept:hover {
  background: var(--c-primary-hover);
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(41, 98, 255, 0.35);
}

/* Cookie settings modal window (blue theme) */
.cookie-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 11000;
  font-family: 'Inter', sans-serif;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease;
}

.cookie-modal.visible {
  opacity: 1;
  visibility: visible;
}

.cookie-modal__overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(4px);
  animation: fadeIn 0.3s ease-out;
}

.cookie-modal__container {
  position: relative;
  background: white;
  border-radius: 24px;
  max-width: 500px;
  width: 90%;
  max-height: 80vh;
  overflow-y: auto;
  animation: slideUp 0.3s ease-out;
  z-index: 11001;
  box-shadow: 0 20px 40px rgba(41, 98, 255, 0.2);
  border: 1px solid rgba(41, 98, 255, 0.1);
}

@keyframes slideUp {
  from {
    transform: translateY(30px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.cookie-modal__header {
  padding: 24px;
  border-bottom: 1px solid #e2e8f0;
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: sticky;
  top: 0;
  background: white;
  border-radius: 24px 24px 0 0;
}

.cookie-modal__title {
  font-size: 22px;
  font-weight: 700;
  color: var(--c-text-main);
  margin: 0;
}

.cookie-modal__close {
  background: transparent;
  border: none;
  font-size: 24px;
  cursor: pointer;
  color: var(--c-text-sub);
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: all 0.2s;
}

.cookie-modal__close:hover {
  background: var(--c-bg-surface);
  color: var(--c-primary);
}

.cookie-modal__content {
  padding: 24px;
}

.cookie-modal__text {
  font-size: 14px;
  color: var(--c-text-sub);
  margin-bottom: 24px;
  line-height: 1.6;
}

.cookie-option {
  margin-bottom: 20px;
  padding: 16px;
  background: var(--c-bg-surface);
  border-radius: 16px;
  border: 1px solid rgba(41, 98, 255, 0.1);
  transition: all 0.2s;
}

.cookie-option:hover {
  border-color: var(--c-primary);
  box-shadow: 0 4px 12px rgba(41, 98, 255, 0.1);
}

.cookie-option__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.cookie-option__title {
  font-weight: 700;
  font-size: 16px;
  color: var(--c-text-main);
}

.cookie-option__desc {
  font-size: 13px;
  color: var(--c-text-sub);
  margin: 0;
  line-height: 1.5;
}

/* Blue toggle switch */
.cookie-switch {
  position: relative;
  display: inline-block;
  width: 46px;
  height: 24px;
}

.cookie-switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.cookie-switch__slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #cbd5e0;
  transition: 0.3s;
  border-radius: 24px;
}

.cookie-switch__slider:before {
  position: absolute;
  content: "";
  height: 20px;
  width: 20px;
  left: 2px;
  bottom: 2px;
  background-color: white;
  transition: 0.3s;
  border-radius: 50%;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

input:checked + .cookie-switch__slider {
  background-color: var(--c-primary);
}

input:checked + .cookie-switch__slider:before {
  transform: translateX(22px);
}

input:disabled + .cookie-switch__slider {
  opacity: 0.5;
  cursor: not-allowed;
}

.cookie-modal__footer {
  padding: 20px 24px;
  border-top: 1px solid #e2e8f0;
  display: flex;
  gap: 12px;
  justify-content: flex-end;
  position: sticky;
  bottom: 0;
  background: white;
  border-radius: 0 0 24px 24px;
}

.cookie-modal__btn {
  padding: 12px 28px;
  border-radius: var(--radius-btn);
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  border: none;
}

.cookie-modal__btn--secondary {
  background: var(--c-bg-surface);
  color: var(--c-primary);
  border: 1px solid var(--c-primary);
}

.cookie-modal__btn--secondary:hover {
  background: rgba(41, 98, 255, 0.05);
  transform: translateY(-2px);
}

.cookie-modal__btn--primary {
  background: var(--c-primary);
  color: white;
  box-shadow: 0 6px 16px rgba(41, 98, 255, 0.25);
}

.cookie-modal__btn--primary:hover {
  background: var(--c-primary-hover);
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(41, 98, 255, 0.35);
}

/* Adaptation for mobile */
@media (max-width: 768px) {
  .cookie-banner__container {
    flex-direction: column;
    align-items: stretch;
    padding: 16px 20px;
  }

  .cookie-banner__actions {
    justify-content: stretch;
  }

  .cookie-banner__btn {
    flex: 1;
    text-align: center;
    padding: 12px 20px;
  }

  .cookie-modal__container {
    width: 95%;
    max-height: 85vh;
  }

  .cookie-modal__footer {
    flex-direction: column;
  }

  .cookie-modal__btn {
    width: 100%;
  }
}

@media (max-width: 480px) {
  .cookie-banner__content {
    min-width: auto;
  }

  .cookie-banner__text {
    font-size: 13px;
  }

  .cookie-modal__header {
    padding: 20px;
  }

  .cookie-modal__title {
    font-size: 20px;
  }

  .cookie-modal__content {
    padding: 20px;
  }

  .cookie-option {
    padding: 14px;
  }

  .cookie-option__title {
    font-size: 15px;
  }

  .cookie-option__desc {
    font-size: 12px;
  }
}

/* Animation for icon */
@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

.cookie-banner.visible .cookie-banner__icon {
  animation: pulse 1s ease-in-out;
}
